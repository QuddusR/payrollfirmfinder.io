<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
  <meta http-equiv="Content-Style-Type" content="text/css">
  <title></title>
  <meta name="Generator" content="Cocoa HTML Writer">
  <meta name="CocoaVersion" content="2575.4">
  <style type="text/css">
    p.p1 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Menlo; color: #3874c0; -webkit-text-stroke: #3874c0}
    p.p2 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Menlo; color: #7cc8fd; -webkit-text-stroke: #7cc8fd}
    p.p3 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Menlo; color: #b36a52; -webkit-text-stroke: #b36a52}
    p.p4 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Menlo; color: #bebebe; -webkit-text-stroke: #bebebe}
    p.p5 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Menlo; color: #5a6065; -webkit-text-stroke: #5a6065}
    p.p6 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Menlo; color: #bebebe; -webkit-text-stroke: #bebebe; min-height: 16.0px}
    p.p7 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Menlo; color: #61b670; -webkit-text-stroke: #61b670}
    span.s1 {font-kerning: none; background-color: #121313}
    span.s2 {font-kerning: none; color: #7cc8fd; background-color: #121313; -webkit-text-stroke: 0px #7cc8fd}
    span.s3 {font-kerning: none; color: #5a5a5a; background-color: #121313; -webkit-text-stroke: 0px #5a5a5a}
    span.s4 {font-kerning: none; color: #bebebe; background-color: #121313; -webkit-text-stroke: 0px #bebebe}
    span.s5 {font-kerning: none; color: #b36a52; background-color: #121313; -webkit-text-stroke: 0px #b36a52}
    span.s6 {font-kerning: none; color: #3874c0; background-color: #121313; -webkit-text-stroke: 0px #3874c0}
    span.s7 {font-kerning: none; color: #cacaca; background-color: #121313; -webkit-text-stroke: 0px #cacaca}
    span.s8 {font-kerning: none; color: #61b670; background-color: #121313; -webkit-text-stroke: 0px #61b670}
    span.s9 {font-kerning: none; color: #97bb86; background-color: #121313; -webkit-text-stroke: 0px #97bb86}
    span.s10 {font-kerning: none; color: #a651f5; background-color: #121313; -webkit-text-stroke: 0px #a651f5}
    span.s11 {font-kerning: none}
    span.s12 {font-kerning: none; color: #30b68f; background-color: #121313; -webkit-text-stroke: 0px #30b68f}
    span.s13 {font-kerning: none; color: #5a6065; background-color: #121313; -webkit-text-stroke: 0px #5a6065}
    span.s14 {font-kerning: none; color: #f16625; background-color: #121313; -webkit-text-stroke: 0px #f16625}
    span.s15 {font-kerning: none; color: #903970; background-color: #121313; -webkit-text-stroke: 0px #903970}
  </style>
</head>
<body>
<p class="p1"><span class="s1">&lt;!DOCTYPE</span><span class="s2"> html</span><span class="s1">&gt;</span></p>
<p class="p1"><span class="s3">&lt;</span><span class="s1">html</span><span class="s4"> </span><span class="s2">lang</span><span class="s3">=</span><span class="s5">"en"</span><span class="s3">&gt;</span></p>
<p class="p1"><span class="s3">&lt;</span><span class="s1">head</span><span class="s3">&gt;</span></p>
<p class="p2"><span class="s4"><span class="Apple-converted-space">    </span></span><span class="s3">&lt;</span><span class="s6">meta</span><span class="s4"> </span><span class="s1">charset</span><span class="s3">=</span><span class="s5">"UTF-8"</span><span class="s3">&gt;</span></p>
<p class="p3"><span class="s4"><span class="Apple-converted-space">    </span></span><span class="s3">&lt;</span><span class="s6">meta</span><span class="s4"> </span><span class="s2">name</span><span class="s3">=</span><span class="s1">"viewport"</span><span class="s4"> </span><span class="s2">content</span><span class="s3">=</span><span class="s1">"width=device-width, initial-scale=1.0"</span><span class="s3">&gt;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">    </span></span><span class="s3">&lt;</span><span class="s6">title</span><span class="s3">&gt;</span><span class="s1">Market Survey: Accounting &amp; Payroll Firms</span><span class="s3">&lt;/</span><span class="s6">title</span><span class="s3">&gt;</span></p>
<p class="p3"><span class="s4"><span class="Apple-converted-space">    </span></span><span class="s3">&lt;</span><span class="s6">script</span><span class="s4"> </span><span class="s2">src</span><span class="s3">=</span><span class="s1">"https://cdn.tailwindcss.com"</span><span class="s3">&gt;&lt;/</span><span class="s6">script</span><span class="s3">&gt;</span></p>
<p class="p3"><span class="s4"><span class="Apple-converted-space">    </span></span><span class="s3">&lt;</span><span class="s6">link</span><span class="s4"> </span><span class="s2">href</span><span class="s3">=</span><span class="s1">"https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&amp;display=swap"</span><span class="s4"> </span><span class="s2">rel</span><span class="s3">=</span><span class="s1">"stylesheet"</span><span class="s3">&gt;</span></p>
<p class="p1"><span class="s4"><span class="Apple-converted-space">    </span></span><span class="s3">&lt;</span><span class="s1">style</span><span class="s3">&gt;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s6">body</span><span class="s1"> </span><span class="s7">{</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s2">font-family:</span><span class="s1"> </span><span class="s8">'Inter'</span><span class="s7">,</span><span class="s1"> </span><span class="s5">sans-serif</span><span class="s7">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s7">}</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s6">.spinner</span><span class="s1"> </span><span class="s7">{</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s2">border:</span><span class="s1"> </span><span class="s9">4px</span><span class="s1"> </span><span class="s5">solid</span><span class="s1"> </span><span class="s5">rgba(</span><span class="s9">0</span><span class="s7">,</span><span class="s1"> </span><span class="s9">0</span><span class="s7">,</span><span class="s1"> </span><span class="s9">0</span><span class="s7">,</span><span class="s1"> </span><span class="s9">0.1</span><span class="s5">)</span><span class="s7">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s2">width:</span><span class="s1"> </span><span class="s9">36px</span><span class="s7">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s2">height:</span><span class="s1"> </span><span class="s9">36px</span><span class="s7">;</span></p>
<p class="p2"><span class="s4"><span class="Apple-converted-space">            </span></span><span class="s1">border-radius:</span><span class="s4"> </span><span class="s9">50%</span><span class="s7">;</span></p>
<p class="p2"><span class="s4"><span class="Apple-converted-space">            </span></span><span class="s1">border-left-color:</span><span class="s4"> #09f</span><span class="s7">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s2">animation:</span><span class="s1"> </span><span class="s5">spin</span><span class="s1"> </span><span class="s9">1s</span><span class="s1"> </span><span class="s5">ease</span><span class="s1"> </span><span class="s5">infinite</span><span class="s7">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s7">}</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s10">@keyframes</span><span class="s1"> </span><span class="s5">spin</span><span class="s1"> </span><span class="s7">{</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s9">0%</span><span class="s1"> </span><span class="s7">{</span><span class="s1"> </span><span class="s2">transform:</span><span class="s1"> </span><span class="s5">rotate(</span><span class="s9">0deg</span><span class="s5">)</span><span class="s7">;</span><span class="s1"> </span><span class="s7">}</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s9">100%</span><span class="s1"> </span><span class="s7">{</span><span class="s1"> </span><span class="s2">transform:</span><span class="s1"> </span><span class="s5">rotate(</span><span class="s9">360deg</span><span class="s5">)</span><span class="s7">;</span><span class="s1"> </span><span class="s7">}</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s7">}</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s6">table</span><span class="s1"> </span><span class="s7">{</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s2">table-layout:</span><span class="s1"> </span><span class="s5">fixed</span><span class="s7">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s2">width:</span><span class="s1"> </span><span class="s9">100%</span><span class="s7">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s7">}</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s6">th</span><span class="s7">,</span><span class="s1"> </span><span class="s6">td</span><span class="s1"> </span><span class="s7">{</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s2">word-wrap:</span><span class="s1"> </span><span class="s5">break-word</span><span class="s7">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s2">padding:</span><span class="s1"> </span><span class="s9">0.75rem</span><span class="s7">;</span><span class="s1"><span class="Apple-converted-space"> </span></span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s7">}</span></p>
<p class="p1"><span class="s4"><span class="Apple-converted-space">        </span></span><span class="s1">.feedback-icon</span><span class="s4"> </span><span class="s7">{</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s2">cursor:</span><span class="s1"> </span><span class="s5">pointer</span><span class="s7">;</span></p>
<p class="p5"><span class="s4"><span class="Apple-converted-space">            </span></span><span class="s2">margin:</span><span class="s4"> </span><span class="s9">0</span><span class="s4"> </span><span class="s9">0.25rem</span><span class="s7">;</span><span class="s4"> </span><span class="s1">/* space between icons */</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s2">transition:</span><span class="s1"> </span><span class="s5">transform</span><span class="s1"> </span><span class="s9">0.2s</span><span class="s7">,</span><span class="s1"> </span><span class="s5">color</span><span class="s1"> </span><span class="s9">0.2s</span><span class="s7">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s2">opacity:</span><span class="s1"> </span><span class="s9">0.7</span><span class="s7">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s7">}</span></p>
<p class="p1"><span class="s4"><span class="Apple-converted-space">        </span></span><span class="s1">.feedback-icon:hover</span><span class="s4"> </span><span class="s7">{</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s2">transform:</span><span class="s1"> </span><span class="s5">scale(</span><span class="s9">1.2</span><span class="s5">)</span><span class="s7">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s2">opacity:</span><span class="s1"> </span><span class="s9">1</span><span class="s7">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s7">}</span></p>
<p class="p1"><span class="s4"><span class="Apple-converted-space">        </span></span><span class="s1">.feedback-icon.selected</span><span class="s4"> </span><span class="s7">{</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s2">opacity:</span><span class="s1"> </span><span class="s9">1</span><span class="s7">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s2">transform:</span><span class="s1"> </span><span class="s5">scale(</span><span class="s9">1.1</span><span class="s5">)</span><span class="s7">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s7">}</span></p>
<p class="p1"><span class="s4"><span class="Apple-converted-space">        </span></span><span class="s1">.feedback-icon.like.selected</span><span class="s4"> </span><span class="s7">{</span></p>
<p class="p5"><span class="s4"><span class="Apple-converted-space">            </span></span><span class="s2">color:</span><span class="s4"> #34D399</span><span class="s7">;</span><span class="s4"> </span><span class="s1">/* Tailwind green-400 */</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s7">}</span></p>
<p class="p1"><span class="s4"><span class="Apple-converted-space">        </span></span><span class="s1">.feedback-icon.dislike.selected</span><span class="s4"> </span><span class="s7">{</span></p>
<p class="p5"><span class="s4"><span class="Apple-converted-space">            </span></span><span class="s2">color:</span><span class="s4"> #F87171</span><span class="s7">;</span><span class="s4"> </span><span class="s1">/* Tailwind red-400 */</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s7">}</span></p>
<p class="p1"><span class="s4"><span class="Apple-converted-space">        </span></span><span class="s1">#refreshFeedbackButton:disabled</span><span class="s4"> </span><span class="s7">{</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s2">opacity:</span><span class="s1"> </span><span class="s9">0.5</span><span class="s7">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s2">cursor:</span><span class="s1"> </span><span class="s5">not-allowed</span><span class="s7">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s7">}</span></p>
<p class="p1"><span class="s4"><span class="Apple-converted-space">    </span></span><span class="s3">&lt;/</span><span class="s1">style</span><span class="s3">&gt;</span></p>
<p class="p1"><span class="s3">&lt;/</span><span class="s1">head</span><span class="s3">&gt;</span></p>
<p class="p3"><span class="s3">&lt;</span><span class="s6">body</span><span class="s4"> </span><span class="s2">class</span><span class="s3">=</span><span class="s1">"bg-gradient-to-br from-slate-900 to-slate-800 text-gray-100 min-h-screen flex flex-col items-center justify-center p-4 selection:bg-sky-500 selection:text-white"</span><span class="s3">&gt;</span></p>
<p class="p6"><span class="s11"></span><br></p>
<p class="p3"><span class="s4"><span class="Apple-converted-space">    </span></span><span class="s3">&lt;</span><span class="s6">div</span><span class="s4"> </span><span class="s2">class</span><span class="s3">=</span><span class="s1">"container mx-auto max-w-5xl w-full bg-slate-800 shadow-2xl rounded-xl p-6 md:p-10"</span><span class="s3">&gt;</span></p>
<p class="p3"><span class="s4"><span class="Apple-converted-space">        </span></span><span class="s3">&lt;</span><span class="s6">header</span><span class="s4"> </span><span class="s2">class</span><span class="s3">=</span><span class="s1">"text-center mb-8"</span><span class="s3">&gt;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s3">&lt;</span><span class="s6">h1</span><span class="s1"> </span><span class="s2">class</span><span class="s3">=</span><span class="s5">"text-3xl md:text-4xl font-bold text-sky-400"</span><span class="s3">&gt;</span><span class="s1">Accounting &amp; Payroll Firm Finder</span><span class="s3">&lt;/</span><span class="s6">h1</span><span class="s3">&gt;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s3">&lt;</span><span class="s6">p</span><span class="s1"> </span><span class="s2">class</span><span class="s3">=</span><span class="s5">"text-slate-400 mt-2"</span><span class="s3">&gt;</span><span class="s1">Enter a country to search for firms. Focus on payroll services. Provide feedback to refine results. URLs are AI-assisted; please verify.</span><span class="s3">&lt;/</span><span class="s6">p</span><span class="s3">&gt;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s3">&lt;/</span><span class="s6">header</span><span class="s3">&gt;</span></p>
<p class="p6"><span class="s11"></span><br></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s3">&lt;</span><span class="s6">main</span><span class="s3">&gt;</span></p>
<p class="p3"><span class="s4"><span class="Apple-converted-space">            </span></span><span class="s3">&lt;</span><span class="s6">div</span><span class="s4"> </span><span class="s2">class</span><span class="s3">=</span><span class="s1">"mb-6 flex flex-col sm:flex-row gap-4 items-center"</span><span class="s3">&gt;</span></p>
<p class="p3"><span class="s4"><span class="Apple-converted-space">                </span></span><span class="s3">&lt;</span><span class="s6">input</span><span class="s4"> </span><span class="s2">type</span><span class="s3">=</span><span class="s1">"text"</span><span class="s4"> </span><span class="s2">id</span><span class="s3">=</span><span class="s1">"countryInput"</span><span class="s4"> </span><span class="s2">placeholder</span><span class="s3">=</span><span class="s1">"E.g., Germany, Japan, Brazil"</span></p>
<p class="p3"><span class="s4"><span class="Apple-converted-space">                       </span></span><span class="s2">class</span><span class="s3">=</span><span class="s1">"flex-grow w-full sm:w-auto bg-slate-700 text-gray-200 border border-slate-600 rounded-lg p-3 focus:ring-2 focus:ring-sky-500 focus:border-sky-500 outline-none transition-all duration-300 placeholder-slate-500"</span><span class="s3">&gt;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                </span></span><span class="s3">&lt;</span><span class="s6">button</span><span class="s1"> </span><span class="s2">id</span><span class="s3">=</span><span class="s5">"searchButton"</span></p>
<p class="p3"><span class="s4"><span class="Apple-converted-space">                        </span></span><span class="s2">class</span><span class="s3">=</span><span class="s1">"w-full sm:w-auto bg-sky-500 hover:bg-sky-600 text-white font-semibold py-3 px-6 rounded-lg transition-colors duration-300 shadow-md hover:shadow-lg focus:outline-none focus:ring-2 focus:ring-sky-400 focus:ring-opacity-75 flex items-center justify-center gap-2"</span><span class="s3">&gt;</span></p>
<p class="p3"><span class="s4"><span class="Apple-converted-space">                    </span></span><span class="s3">&lt;</span><span class="s6">svg</span><span class="s4"> </span><span class="s2">xmlns</span><span class="s3">=</span><span class="s1">"http://www.w3.org/2000/svg"</span><span class="s4"> </span><span class="s2">width</span><span class="s3">=</span><span class="s1">"20"</span><span class="s4"> </span><span class="s2">height</span><span class="s3">=</span><span class="s1">"20"</span><span class="s4"> </span><span class="s2">viewBox</span><span class="s3">=</span><span class="s1">"0 0 24 24"</span><span class="s4"> </span><span class="s2">fill</span><span class="s3">=</span><span class="s1">"none"</span><span class="s4"> </span><span class="s2">stroke</span><span class="s3">=</span><span class="s1">"currentColor"</span><span class="s4"> </span><span class="s2">stroke-width</span><span class="s3">=</span><span class="s1">"2"</span><span class="s4"> </span><span class="s2">stroke-linecap</span><span class="s3">=</span><span class="s1">"round"</span><span class="s4"> </span><span class="s2">stroke-linejoin</span><span class="s3">=</span><span class="s1">"round"</span><span class="s4"> </span><span class="s2">class</span><span class="s3">=</span><span class="s1">"lucide lucide-search"</span><span class="s3">&gt;&lt;</span><span class="s6">circle</span><span class="s4"> </span><span class="s2">cx</span><span class="s3">=</span><span class="s1">"11"</span><span class="s4"> </span><span class="s2">cy</span><span class="s3">=</span><span class="s1">"11"</span><span class="s4"> </span><span class="s2">r</span><span class="s3">=</span><span class="s1">"8"</span><span class="s3">/&gt;&lt;</span><span class="s6">path</span><span class="s4"> </span><span class="s2">d</span><span class="s3">=</span><span class="s1">"m21 21-4.3-4.3"</span><span class="s3">/&gt;&lt;/</span><span class="s6">svg</span><span class="s3">&gt;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                    </span>Search Firms</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                </span></span><span class="s3">&lt;/</span><span class="s6">button</span><span class="s3">&gt;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s3">&lt;/</span><span class="s6">div</span><span class="s3">&gt;</span></p>
<p class="p6"><span class="s11"></span><br></p>
<p class="p3"><span class="s4"><span class="Apple-converted-space">            </span></span><span class="s3">&lt;</span><span class="s6">div</span><span class="s4"> </span><span class="s2">id</span><span class="s3">=</span><span class="s1">"messageArea"</span><span class="s4"> </span><span class="s2">class</span><span class="s3">=</span><span class="s1">"text-center my-4 min-h-[24px]"</span><span class="s3">&gt;&lt;/</span><span class="s6">div</span><span class="s3">&gt;</span></p>
<p class="p3"><span class="s4"><span class="Apple-converted-space">            </span></span><span class="s3">&lt;</span><span class="s6">div</span><span class="s4"> </span><span class="s2">id</span><span class="s3">=</span><span class="s1">"loadingIndicator"</span><span class="s4"> </span><span class="s2">class</span><span class="s3">=</span><span class="s1">"hidden flex justify-center items-center my-6"</span><span class="s3">&gt;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                </span></span><span class="s3">&lt;</span><span class="s6">div</span><span class="s1"> </span><span class="s2">class</span><span class="s3">=</span><span class="s5">"spinner"</span><span class="s3">&gt;&lt;/</span><span class="s6">div</span><span class="s3">&gt;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                </span></span><span class="s3">&lt;</span><span class="s6">p</span><span class="s1"> </span><span class="s2">class</span><span class="s3">=</span><span class="s5">"ml-3 text-slate-400"</span><span class="s3">&gt;</span><span class="s1">Searching for firms...</span><span class="s3">&lt;/</span><span class="s6">p</span><span class="s3">&gt;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s3">&lt;/</span><span class="s6">div</span><span class="s3">&gt;</span></p>
<p class="p6"><span class="s11"></span><br></p>
<p class="p3"><span class="s4"><span class="Apple-converted-space">            </span></span><span class="s3">&lt;</span><span class="s6">div</span><span class="s4"> </span><span class="s2">id</span><span class="s3">=</span><span class="s1">"resultsSectionContainer"</span><span class="s4"> </span><span class="s2">class</span><span class="s3">=</span><span class="s1">"mt-6"</span><span class="s3">&gt;</span></p>
<p class="p3"><span class="s4"><span class="Apple-converted-space">                </span></span><span class="s3">&lt;</span><span class="s6">div</span><span class="s4"> </span><span class="s2">id</span><span class="s3">=</span><span class="s1">"resultsSection"</span><span class="s4"> </span><span class="s2">class</span><span class="s3">=</span><span class="s1">"overflow-x-auto bg-slate-750 rounded-lg shadow"</span><span class="s3">&gt;&lt;/</span><span class="s6">div</span><span class="s3">&gt;</span></p>
<p class="p3"><span class="s4"><span class="Apple-converted-space">                 </span></span><span class="s3">&lt;</span><span class="s6">div</span><span class="s4"> </span><span class="s2">class</span><span class="s3">=</span><span class="s1">"mt-6 flex justify-center gap-4"</span><span class="s3">&gt;</span></p>
<p class="p3"><span class="s4"><span class="Apple-converted-space">                    </span></span><span class="s3">&lt;</span><span class="s6">button</span><span class="s4"> </span><span class="s2">id</span><span class="s3">=</span><span class="s1">"exportButton"</span><span class="s4"> </span><span class="s2">class</span><span class="s3">=</span><span class="s1">"hidden bg-green-500 hover:bg-green-600 text-white font-semibold py-2 px-4 rounded-lg transition-colors duration-300 shadow-md hover:shadow-lg focus:outline-none focus:ring-2 focus:ring-green-400 focus:ring-opacity-75 flex items-center justify-center gap-2"</span><span class="s3">&gt;</span></p>
<p class="p3"><span class="s4"><span class="Apple-converted-space">                        </span></span><span class="s3">&lt;</span><span class="s6">svg</span><span class="s4"> </span><span class="s2">xmlns</span><span class="s3">=</span><span class="s1">"http://www.w3.org/2000/svg"</span><span class="s4"> </span><span class="s2">width</span><span class="s3">=</span><span class="s1">"18"</span><span class="s4"> </span><span class="s2">height</span><span class="s3">=</span><span class="s1">"18"</span><span class="s4"> </span><span class="s2">viewBox</span><span class="s3">=</span><span class="s1">"0 0 24 24"</span><span class="s4"> </span><span class="s2">fill</span><span class="s3">=</span><span class="s1">"none"</span><span class="s4"> </span><span class="s2">stroke</span><span class="s3">=</span><span class="s1">"currentColor"</span><span class="s4"> </span><span class="s2">stroke-width</span><span class="s3">=</span><span class="s1">"2"</span><span class="s4"> </span><span class="s2">stroke-linecap</span><span class="s3">=</span><span class="s1">"round"</span><span class="s4"> </span><span class="s2">stroke-linejoin</span><span class="s3">=</span><span class="s1">"round"</span><span class="s4"> </span><span class="s2">class</span><span class="s3">=</span><span class="s1">"lucide lucide-download"</span><span class="s3">&gt;&lt;</span><span class="s6">path</span><span class="s4"> </span><span class="s2">d</span><span class="s3">=</span><span class="s1">"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"</span><span class="s3">/&gt;&lt;</span><span class="s6">polyline</span><span class="s4"> </span><span class="s2">points</span><span class="s3">=</span><span class="s1">"7 10 12 15 17 10"</span><span class="s3">/&gt;&lt;</span><span class="s6">line</span><span class="s4"> </span><span class="s2">x1</span><span class="s3">=</span><span class="s1">"12"</span><span class="s4"> </span><span class="s2">x2</span><span class="s3">=</span><span class="s1">"12"</span><span class="s4"> </span><span class="s2">y1</span><span class="s3">=</span><span class="s1">"15"</span><span class="s4"> </span><span class="s2">y2</span><span class="s3">=</span><span class="s1">"3"</span><span class="s3">/&gt;&lt;/</span><span class="s6">svg</span><span class="s3">&gt;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                        </span>Export Results (CSV)</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                    </span></span><span class="s3">&lt;/</span><span class="s6">button</span><span class="s3">&gt;</span></p>
<p class="p3"><span class="s4"><span class="Apple-converted-space">                    </span></span><span class="s3">&lt;</span><span class="s6">button</span><span class="s4"> </span><span class="s2">id</span><span class="s3">=</span><span class="s1">"refreshFeedbackButton"</span><span class="s4"> </span><span class="s2">class</span><span class="s3">=</span><span class="s1">"hidden bg-blue-500 hover:bg-blue-600 text-white font-semibold py-2 px-4 rounded-lg transition-colors duration-300 shadow-md hover:shadow-lg focus:outline-none focus:ring-2 focus:ring-blue-400 focus:ring-opacity-75 flex items-center justify-center gap-2"</span><span class="s4"> </span><span class="s2">disabled</span><span class="s3">&gt;</span></p>
<p class="p3"><span class="s4"><span class="Apple-converted-space">                        </span></span><span class="s3">&lt;</span><span class="s6">svg</span><span class="s4"> </span><span class="s2">xmlns</span><span class="s3">=</span><span class="s1">"http://www.w3.org/2000/svg"</span><span class="s4"> </span><span class="s2">width</span><span class="s3">=</span><span class="s1">"18"</span><span class="s4"> </span><span class="s2">height</span><span class="s3">=</span><span class="s1">"18"</span><span class="s4"> </span><span class="s2">viewBox</span><span class="s3">=</span><span class="s1">"0 0 24 24"</span><span class="s4"> </span><span class="s2">fill</span><span class="s3">=</span><span class="s1">"none"</span><span class="s4"> </span><span class="s2">stroke</span><span class="s3">=</span><span class="s1">"currentColor"</span><span class="s4"> </span><span class="s2">stroke-width</span><span class="s3">=</span><span class="s1">"2"</span><span class="s4"> </span><span class="s2">stroke-linecap</span><span class="s3">=</span><span class="s1">"round"</span><span class="s4"> </span><span class="s2">stroke-linejoin</span><span class="s3">=</span><span class="s1">"round"</span><span class="s4"> </span><span class="s2">class</span><span class="s3">=</span><span class="s1">"lucide lucide-refresh-cw"</span><span class="s3">&gt;&lt;</span><span class="s6">path</span><span class="s4"> </span><span class="s2">d</span><span class="s3">=</span><span class="s1">"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8"</span><span class="s3">/&gt;&lt;</span><span class="s6">path</span><span class="s4"> </span><span class="s2">d</span><span class="s3">=</span><span class="s1">"M21 3v5h-5"</span><span class="s3">/&gt;&lt;</span><span class="s6">path</span><span class="s4"> </span><span class="s2">d</span><span class="s3">=</span><span class="s1">"M3 21v-5h5"</span><span class="s3">/&gt;&lt;</span><span class="s6">path</span><span class="s4"> </span><span class="s2">d</span><span class="s3">=</span><span class="s1">"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16"</span><span class="s3">/&gt;&lt;/</span><span class="s6">svg</span><span class="s3">&gt;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                        </span>Refresh with Feedback</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                    </span></span><span class="s3">&lt;/</span><span class="s6">button</span><span class="s3">&gt;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                </span></span><span class="s3">&lt;/</span><span class="s6">div</span><span class="s3">&gt;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s3">&lt;/</span><span class="s6">div</span><span class="s3">&gt;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s3">&lt;/</span><span class="s6">main</span><span class="s3">&gt;</span></p>
<p class="p6"><span class="s11"></span><br></p>
<p class="p3"><span class="s4"><span class="Apple-converted-space">        </span></span><span class="s3">&lt;</span><span class="s6">footer</span><span class="s4"> </span><span class="s2">class</span><span class="s3">=</span><span class="s1">"text-center mt-10 text-sm text-slate-500"</span><span class="s3">&gt;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s3">&lt;</span><span class="s6">p</span><span class="s3">&gt;</span><span class="s1">&amp;copy; </span><span class="s3">&lt;</span><span class="s6">span</span><span class="s1"> </span><span class="s2">id</span><span class="s3">=</span><span class="s5">"currentYear"</span><span class="s3">&gt;&lt;/</span><span class="s6">span</span><span class="s3">&gt;</span><span class="s1"> Market Survey App. Powered by AI.</span><span class="s3">&lt;/</span><span class="s6">p</span><span class="s3">&gt;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s3">&lt;/</span><span class="s6">footer</span><span class="s3">&gt;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">    </span></span><span class="s3">&lt;/</span><span class="s6">div</span><span class="s3">&gt;</span></p>
<p class="p6"><span class="s11"></span><br></p>
<p class="p1"><span class="s4"><span class="Apple-converted-space">    </span></span><span class="s3">&lt;</span><span class="s1">script</span><span class="s3">&gt;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s10">const</span><span class="s1"> countryInput </span><span class="s7">=</span><span class="s1"> document</span><span class="s7">.</span><span class="s1">getElementById</span><span class="s7">(</span><span class="s8">'countryInput'</span><span class="s7">);</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s10">const</span><span class="s1"> searchButton </span><span class="s7">=</span><span class="s1"> document</span><span class="s7">.</span><span class="s1">getElementById</span><span class="s7">(</span><span class="s8">'searchButton'</span><span class="s7">);</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s10">const</span><span class="s1"> resultsSection </span><span class="s7">=</span><span class="s1"> document</span><span class="s7">.</span><span class="s1">getElementById</span><span class="s7">(</span><span class="s8">'resultsSection'</span><span class="s7">);</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s10">const</span><span class="s1"> exportButton </span><span class="s7">=</span><span class="s1"> document</span><span class="s7">.</span><span class="s1">getElementById</span><span class="s7">(</span><span class="s8">'exportButton'</span><span class="s7">);</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s10">const</span><span class="s1"> refreshFeedbackButton </span><span class="s7">=</span><span class="s1"> document</span><span class="s7">.</span><span class="s1">getElementById</span><span class="s7">(</span><span class="s8">'refreshFeedbackButton'</span><span class="s7">);</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s10">const</span><span class="s1"> loadingIndicator </span><span class="s7">=</span><span class="s1"> document</span><span class="s7">.</span><span class="s1">getElementById</span><span class="s7">(</span><span class="s8">'loadingIndicator'</span><span class="s7">);</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s10">const</span><span class="s1"> messageArea </span><span class="s7">=</span><span class="s1"> document</span><span class="s7">.</span><span class="s1">getElementById</span><span class="s7">(</span><span class="s8">'messageArea'</span><span class="s7">);</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span>document</span><span class="s7">.</span><span class="s1">getElementById</span><span class="s7">(</span><span class="s8">'currentYear'</span><span class="s7">).</span><span class="s1">textContent </span><span class="s7">=</span><span class="s1"> </span><span class="s10">new</span><span class="s1"> </span><span class="s12">Date</span><span class="s7">().</span><span class="s1">getFullYear</span><span class="s7">();</span></p>
<p class="p6"><span class="s11"></span><br></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s10">let</span><span class="s1"> currentFirmsData </span><span class="s7">=</span><span class="s1"> </span><span class="s7">[];</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s10">let</span><span class="s1"> currentCountry </span><span class="s7">=</span><span class="s1"> </span><span class="s8">""</span><span class="s7">;</span><span class="s1"><span class="Apple-converted-space"> </span></span></p>
<p class="p6"><span class="s11"></span><br></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span>searchButton</span><span class="s7">.</span><span class="s1">addEventListener</span><span class="s7">(</span><span class="s8">'click'</span><span class="s7">,</span><span class="s1"> </span><span class="s7">()</span><span class="s1"> </span><span class="s7">=&gt;</span><span class="s1"> handleSearch</span><span class="s7">(</span><span class="s10">false</span><span class="s7">));</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span>countryInput</span><span class="s7">.</span><span class="s1">addEventListener</span><span class="s7">(</span><span class="s8">'keypress'</span><span class="s7">,</span><span class="s1"> </span><span class="s7">(</span><span class="s1">event</span><span class="s7">)</span><span class="s1"> </span><span class="s7">=&gt;</span><span class="s1"> </span><span class="s7">{</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s10">if</span><span class="s1"> </span><span class="s7">(</span><span class="s1">event</span><span class="s7">.</span><span class="s1">key </span><span class="s7">===</span><span class="s1"> </span><span class="s8">'Enter'</span><span class="s7">)</span><span class="s1"> handleSearch</span><span class="s7">(</span><span class="s10">false</span><span class="s7">);</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s7">});</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span>exportButton</span><span class="s7">.</span><span class="s1">addEventListener</span><span class="s7">(</span><span class="s8">'click'</span><span class="s7">,</span><span class="s1"> exportResultsToCSV</span><span class="s7">);</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span>refreshFeedbackButton</span><span class="s7">.</span><span class="s1">addEventListener</span><span class="s7">(</span><span class="s8">'click'</span><span class="s7">,</span><span class="s1"> </span><span class="s7">()</span><span class="s1"> </span><span class="s7">=&gt;</span><span class="s1"> handleSearch</span><span class="s7">(</span><span class="s10">true</span><span class="s7">));</span></p>
<p class="p6"><span class="s11"></span><br></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s13">/**</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">         </span>* Handles the search process, optionally using feedback.</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">         </span>* @param {boolean} useFeedback - Whether to incorporate user feedback into the prompt.</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">         </span>*/</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s10">async</span><span class="s1"> </span><span class="s10">function</span><span class="s1"> handleSearch</span><span class="s7">(</span><span class="s1">useFeedback </span><span class="s7">=</span><span class="s1"> </span><span class="s10">false</span><span class="s7">)</span><span class="s1"> </span><span class="s7">{</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s10">const</span><span class="s1"> country </span><span class="s7">=</span><span class="s1"> countryInput</span><span class="s7">.</span><span class="s1">value</span><span class="s7">.</span><span class="s1">trim</span><span class="s7">();</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s10">if</span><span class="s1"> </span><span class="s7">(!</span><span class="s1">country </span><span class="s7">&amp;&amp;</span><span class="s1"> </span><span class="s7">!</span><span class="s1">useFeedback</span><span class="s7">)</span><span class="s1"> </span><span class="s7">{</span><span class="s1"><span class="Apple-converted-space"> </span></span></p>
<p class="p7"><span class="s4"><span class="Apple-converted-space">                </span>displayMessage</span><span class="s7">(</span><span class="s1">'Please enter a country name.'</span><span class="s7">,</span><span class="s4"> </span><span class="s1">'error'</span><span class="s7">);</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                </span>countryInput</span><span class="s7">.</span><span class="s1">focus</span><span class="s7">();</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                </span></span><span class="s10">return</span><span class="s7">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s7">}</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s10">if</span><span class="s1"> </span><span class="s7">(!</span><span class="s1">useFeedback</span><span class="s7">)</span><span class="s1"> </span><span class="s7">{</span><span class="s1"><span class="Apple-converted-space"> </span></span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                </span>currentCountry </span><span class="s7">=</span><span class="s1"> country</span><span class="s7">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                </span>resultsSection</span><span class="s7">.</span><span class="s1">innerHTML </span><span class="s7">=</span><span class="s1"> </span><span class="s8">''</span><span class="s7">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                </span>currentFirmsData </span><span class="s7">=</span><span class="s1"> </span><span class="s7">[];</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                </span>exportButton</span><span class="s7">.</span><span class="s1">classList</span><span class="s7">.</span><span class="s1">add</span><span class="s7">(</span><span class="s8">'hidden'</span><span class="s7">);</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                </span>refreshFeedbackButton</span><span class="s7">.</span><span class="s1">classList</span><span class="s7">.</span><span class="s1">add</span><span class="s7">(</span><span class="s8">'hidden'</span><span class="s7">);</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                </span>refreshFeedbackButton</span><span class="s7">.</span><span class="s1">disabled </span><span class="s7">=</span><span class="s1"> </span><span class="s10">true</span><span class="s7">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s7">}</span></p>
<p class="p6"><span class="s1"><span class="Apple-converted-space">            </span></span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span>displayMessage</span><span class="s7">(</span><span class="s8">''</span><span class="s7">);</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span>showLoading</span><span class="s7">(</span><span class="s10">true</span><span class="s7">);</span></p>
<p class="p6"><span class="s11"></span><br></p>
<p class="p5"><span class="s4"><span class="Apple-converted-space">            </span></span><span class="s1">// Keywords for payroll services</span></p>
<p class="p7"><span class="s4"><span class="Apple-converted-space">            </span></span><span class="s10">const</span><span class="s4"> payrollKeywords </span><span class="s7">=</span><span class="s4"> </span><span class="s1">"payroll services, payroll outsourcing, payroll administration, payroll processing, payslips management, salary administration, employee wage processing, pay disbursement services"</span><span class="s7">;</span></p>
<p class="p6"><span class="s11"></span><br></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s10">try</span><span class="s1"> </span><span class="s7">{</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                </span></span><span class="s10">let</span><span class="s1"> prompt</span><span class="s7">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                </span></span><span class="s10">if</span><span class="s1"> </span><span class="s7">(</span><span class="s1">useFeedback</span><span class="s7">)</span><span class="s1"> </span><span class="s7">{</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                    </span></span><span class="s10">const</span><span class="s1"> likedFirms </span><span class="s7">=</span><span class="s1"> currentFirmsData</span><span class="s7">.</span><span class="s1">filter</span><span class="s7">(</span><span class="s1">f </span><span class="s7">=&gt;</span><span class="s1"> f</span><span class="s7">.</span><span class="s1">feedback </span><span class="s7">===</span><span class="s1"> </span><span class="s8">'like'</span><span class="s7">);</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                    </span></span><span class="s10">const</span><span class="s1"> dislikedFirms </span><span class="s7">=</span><span class="s1"> currentFirmsData</span><span class="s7">.</span><span class="s1">filter</span><span class="s7">(</span><span class="s1">f </span><span class="s7">=&gt;</span><span class="s1"> f</span><span class="s7">.</span><span class="s1">feedback </span><span class="s7">===</span><span class="s1"> </span><span class="s8">'dislike'</span><span class="s7">);</span></p>
<p class="p6"><span class="s1"><span class="Apple-converted-space">                    </span></span></p>
<p class="p7"><span class="s4"><span class="Apple-converted-space">                    </span>prompt </span><span class="s7">=</span><span class="s4"> </span><span class="s1">`Find around 30 new, real accounting and payroll firms in </span><span class="s7">${</span><span class="s4">currentCountry</span><span class="s7">}</span><span class="s1">.</span></p>
<p class="p7"><span class="s1">**Crucially, prioritize firms that are verified to offer payroll services.** Look for mentions of services like: </span><span class="s7">${</span><span class="s4">payrollKeywords</span><span class="s7">}</span><span class="s1">.</span></p>
<p class="p7"><span class="s1">For each firm:</span></p>
<p class="p7"><span class="s1">1.<span class="Apple-converted-space">  </span>Provide its official, verified name.</span></p>
<p class="p7"><span class="s1">2.<span class="Apple-converted-space">  </span>Provide a brief, factual description of its services or specialty (around 15-25 words), highlighting any payroll services.</span></p>
<p class="p7"><span class="s1">3.<span class="Apple-converted-space">  </span>Provide its official website URL. Only provide if highly confident it's correct for the exact firm. If not, set websiteUrl to "Official URL not found" or leave empty. Do not invent URLs.</span></p>
<p class="p7"><span class="s1">Accuracy is paramount.</span></p>
<p class="p6"><span class="s11"></span><br></p>
<p class="p7"><span class="s1">**Feedback for Refinement:**</span></p>
<p class="p7"><span class="s1">Based on previous results:</span></p>
<p class="p7"><span class="s7">${</span><span class="s4">likedFirms</span><span class="s7">.</span><span class="s4">length </span><span class="s7">&gt;</span><span class="s4"> </span><span class="s14">0</span><span class="s4"> </span><span class="s7">?</span><span class="s4"> </span><span class="s1">`Prioritize firms that are similar in services (especially payroll focus), specialty, or target market to these examples (which were liked):</span></p>
<p class="p7"><span class="s7">${</span><span class="s4">likedFirms</span><span class="s7">.</span><span class="s4">map</span><span class="s7">(</span><span class="s4">f </span><span class="s7">=&gt;</span><span class="s4"> </span><span class="s1">`- </span><span class="s7">${</span><span class="s4">f</span><span class="s7">.</span><span class="s4">firmName</span><span class="s7">}</span><span class="s1">: </span><span class="s7">${</span><span class="s4">f</span><span class="s7">.</span><span class="s4">description</span><span class="s7">}</span><span class="s1">`</span><span class="s7">).</span><span class="s4">join</span><span class="s7">(</span><span class="s1">'\n'</span><span class="s7">)}</span><span class="s1">`</span><span class="s4"> </span><span class="s7">:</span><span class="s4"> </span><span class="s1">'No specific "liked" examples provided in this round.'</span><span class="s7">}</span></p>
<p class="p6"><span class="s11"></span><br></p>
<p class="p7"><span class="s7">${</span><span class="s4">dislikedFirms</span><span class="s7">.</span><span class="s4">length </span><span class="s7">&gt;</span><span class="s4"> </span><span class="s14">0</span><span class="s4"> </span><span class="s7">?</span><span class="s4"> </span><span class="s1">`Avoid firms that are similar in services, specialty, or target market to these examples (which were disliked):</span></p>
<p class="p7"><span class="s7">${</span><span class="s4">dislikedFirms</span><span class="s7">.</span><span class="s4">map</span><span class="s7">(</span><span class="s4">f </span><span class="s7">=&gt;</span><span class="s4"> </span><span class="s1">`- </span><span class="s7">${</span><span class="s4">f</span><span class="s7">.</span><span class="s4">firmName</span><span class="s7">}</span><span class="s1">: </span><span class="s7">${</span><span class="s4">f</span><span class="s7">.</span><span class="s4">description</span><span class="s7">}</span><span class="s1">`</span><span class="s7">).</span><span class="s4">join</span><span class="s7">(</span><span class="s1">'\n'</span><span class="s7">)}</span><span class="s1">`</span><span class="s4"> </span><span class="s7">:</span><span class="s4"> </span><span class="s1">'No specific "disliked" examples provided in this round.'</span><span class="s7">}</span></p>
<p class="p6"><span class="s11"></span><br></p>
<p class="p7"><span class="s1">Ensure the new list is distinct from any examples provided above. If you cannot find 30 new firms under these guidelines, provide as many as you can reliably identify, focusing on payroll service providers.`</span><span class="s7">;</span></p>
<p class="p6"><span class="s11"></span><br></p>
<p class="p5"><span class="s4"><span class="Apple-converted-space">                </span></span><span class="s7">}</span><span class="s4"> </span><span class="s10">else</span><span class="s4"> </span><span class="s7">{</span><span class="s4"> </span><span class="s1">// Initial search prompt</span></p>
<p class="p7"><span class="s4"><span class="Apple-converted-space">                    </span>prompt </span><span class="s7">=</span><span class="s4"> </span><span class="s1">`Find around 30 real accounting and payroll firms in </span><span class="s7">${</span><span class="s4">currentCountry</span><span class="s7">}</span><span class="s1">.</span></p>
<p class="p7"><span class="s1">**Strongly prioritize firms that are verified to offer payroll services.** Their descriptions or services should explicitly mention keywords such as: </span><span class="s7">${</span><span class="s4">payrollKeywords</span><span class="s7">}</span><span class="s1">.</span></p>
<p class="p7"><span class="s1">For each firm:</span></p>
<p class="p7"><span class="s1">1.<span class="Apple-converted-space">  </span>Provide its **official, verified name**.</span></p>
<p class="p7"><span class="s1">2.<span class="Apple-converted-space">  </span>Provide a **brief, factual description** of its services or specialty (around 15-25 words), with an emphasis on any payroll-related offerings.</span></p>
<p class="p7"><span class="s1">3.<span class="Apple-converted-space">  </span>Provide its **official website URL**. **Crucially, only provide the URL if you are highly confident it is the correct, official website for the exact firm identified. Do not guess or provide URLs for similarly named companies. If a verified official URL cannot be found or you are not highly confident, set the websiteUrl field to "Official URL not found" or leave it empty.** Do not invent URLs or provide placeholder URLs.</span></p>
<p class="p7"><span class="s1">Ensure all information, especially firm names and website URLs, is factual and directly associated. If you cannot find 30, provide as many as you can reliably identify, focusing on those with clear payroll service offerings.`</span><span class="s7">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                </span></span><span class="s7">}</span></p>
<p class="p6"><span class="s1"><span class="Apple-converted-space">                </span></span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                </span></span><span class="s10">let</span><span class="s1"> chatHistory </span><span class="s7">=</span><span class="s1"> </span><span class="s7">[{</span><span class="s1"> role</span><span class="s7">:</span><span class="s1"> </span><span class="s8">"user"</span><span class="s7">,</span><span class="s1"> parts</span><span class="s7">:</span><span class="s1"> </span><span class="s7">[{</span><span class="s1"> text</span><span class="s7">:</span><span class="s1"> prompt </span><span class="s7">}]</span><span class="s1"> </span><span class="s7">}];</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                </span></span><span class="s10">const</span><span class="s1"> payload </span><span class="s7">=</span><span class="s1"> </span><span class="s7">{</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                    </span>contents</span><span class="s7">:</span><span class="s1"> chatHistory</span><span class="s7">,</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                    </span>generationConfig</span><span class="s7">:</span><span class="s1"> </span><span class="s7">{</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                        </span>responseMimeType</span><span class="s7">:</span><span class="s1"> </span><span class="s8">"application/json"</span><span class="s7">,</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                        </span>responseSchema</span><span class="s7">:</span><span class="s1"> </span><span class="s7">{</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                            </span>type</span><span class="s7">:</span><span class="s1"> </span><span class="s8">"OBJECT"</span><span class="s7">,</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                            </span>properties</span><span class="s7">:</span><span class="s1"> </span><span class="s7">{</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                                </span></span><span class="s8">"firms"</span><span class="s7">:</span><span class="s1"> </span><span class="s7">{</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                                    </span>type</span><span class="s7">:</span><span class="s1"> </span><span class="s8">"ARRAY"</span><span class="s7">,</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                                    </span>items</span><span class="s7">:</span><span class="s1"> </span><span class="s7">{</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                                        </span>type</span><span class="s7">:</span><span class="s1"> </span><span class="s8">"OBJECT"</span><span class="s7">,</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                                        </span>properties</span><span class="s7">:</span><span class="s1"> </span><span class="s7">{</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                                            </span></span><span class="s8">"firmName"</span><span class="s7">:</span><span class="s1"> </span><span class="s7">{</span><span class="s1"> </span><span class="s8">"type"</span><span class="s7">:</span><span class="s1"> </span><span class="s8">"STRING"</span><span class="s1"> </span><span class="s7">},</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                                            </span></span><span class="s8">"description"</span><span class="s7">:</span><span class="s1"> </span><span class="s7">{</span><span class="s1"> </span><span class="s8">"type"</span><span class="s7">:</span><span class="s1"> </span><span class="s8">"STRING"</span><span class="s1"> </span><span class="s7">},</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                                            </span></span><span class="s8">"websiteUrl"</span><span class="s7">:</span><span class="s1"> </span><span class="s7">{</span><span class="s1"> </span><span class="s8">"type"</span><span class="s7">:</span><span class="s1"> </span><span class="s8">"STRING"</span><span class="s1"> </span><span class="s7">}</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                                        </span></span><span class="s7">},</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                                        </span>required</span><span class="s7">:</span><span class="s1"> </span><span class="s7">[</span><span class="s8">"firmName"</span><span class="s7">,</span><span class="s1"> </span><span class="s8">"description"</span><span class="s7">,</span><span class="s1"> </span><span class="s8">"websiteUrl"</span><span class="s7">]</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                                    </span></span><span class="s7">}</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                                </span></span><span class="s7">}</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                            </span></span><span class="s7">},</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                            </span>required</span><span class="s7">:</span><span class="s1"> </span><span class="s7">[</span><span class="s8">"firms"</span><span class="s7">]</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                        </span></span><span class="s7">}</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                    </span></span><span class="s7">}</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                </span></span><span class="s7">};</span></p>
<p class="p6"><span class="s11"></span><br></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                </span></span><span class="s10">const</span><span class="s1"> apiKey </span><span class="s7">=</span><span class="s1"> </span><span class="s8">""</span><span class="s7">;</span><span class="s1"><span class="Apple-converted-space"> </span></span></p>
<p class="p7"><span class="s4"><span class="Apple-converted-space">                </span></span><span class="s10">const</span><span class="s4"> apiUrl </span><span class="s7">=</span><span class="s4"> </span><span class="s1">`https://generativelanguage.googleapis.com/v1beta/models/gemini-2.0-flash:generateContent?key=</span><span class="s7">${</span><span class="s4">apiKey</span><span class="s7">}</span><span class="s1">`</span><span class="s7">;</span></p>
<p class="p6"><span class="s1"><span class="Apple-converted-space">                </span></span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                </span></span><span class="s10">const</span><span class="s1"> response </span><span class="s7">=</span><span class="s1"> </span><span class="s10">await</span><span class="s1"> fetch</span><span class="s7">(</span><span class="s1">apiUrl</span><span class="s7">,</span><span class="s1"> </span><span class="s7">{</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                    </span>method</span><span class="s7">:</span><span class="s1"> </span><span class="s8">'POST'</span><span class="s7">,</span></p>
<p class="p7"><span class="s4"><span class="Apple-converted-space">                    </span>headers</span><span class="s7">:</span><span class="s4"> </span><span class="s7">{</span><span class="s4"> </span><span class="s1">'Content-Type'</span><span class="s7">:</span><span class="s4"> </span><span class="s1">'application/json'</span><span class="s4"> </span><span class="s7">},</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                    </span>body</span><span class="s7">:</span><span class="s1"> </span><span class="s12">JSON</span><span class="s7">.</span><span class="s1">stringify</span><span class="s7">(</span><span class="s1">payload</span><span class="s7">)</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                </span></span><span class="s7">});</span></p>
<p class="p6"><span class="s11"></span><br></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                </span></span><span class="s10">if</span><span class="s1"> </span><span class="s7">(!</span><span class="s1">response</span><span class="s7">.</span><span class="s1">ok</span><span class="s7">)</span><span class="s1"> </span><span class="s7">{</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                    </span></span><span class="s10">const</span><span class="s1"> errorData </span><span class="s7">=</span><span class="s1"> </span><span class="s10">await</span><span class="s1"> response</span><span class="s7">.</span><span class="s1">json</span><span class="s7">();</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                    </span></span><span class="s10">throw</span><span class="s1"> </span><span class="s10">new</span><span class="s1"> </span><span class="s12">Error</span><span class="s7">(</span><span class="s8">`API request failed: </span><span class="s7">${</span><span class="s1">response</span><span class="s7">.</span><span class="s1">status</span><span class="s7">}</span><span class="s8">. </span><span class="s7">${</span><span class="s1">errorData</span><span class="s7">?.</span><span class="s1">error</span><span class="s7">?.</span><span class="s1">message </span><span class="s7">||</span><span class="s1"> </span><span class="s8">'Please try again.'</span><span class="s7">}</span><span class="s8">`</span><span class="s7">);</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                </span></span><span class="s7">}</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                </span></span><span class="s10">const</span><span class="s1"> result </span><span class="s7">=</span><span class="s1"> </span><span class="s10">await</span><span class="s1"> response</span><span class="s7">.</span><span class="s1">json</span><span class="s7">();</span></p>
<p class="p6"><span class="s11"></span><br></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                </span></span><span class="s10">if</span><span class="s1"> </span><span class="s7">(</span><span class="s1">result</span><span class="s7">.</span><span class="s1">candidates </span><span class="s7">&amp;&amp;</span><span class="s1"> result</span><span class="s7">.</span><span class="s1">candidates</span><span class="s7">[</span><span class="s14">0</span><span class="s7">]?.</span><span class="s1">content</span><span class="s7">?.</span><span class="s1">parts</span><span class="s7">?.[</span><span class="s14">0</span><span class="s7">])</span><span class="s1"> </span><span class="s7">{</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                    </span></span><span class="s10">const</span><span class="s1"> jsonText </span><span class="s7">=</span><span class="s1"> result</span><span class="s7">.</span><span class="s1">candidates</span><span class="s7">[</span><span class="s14">0</span><span class="s7">].</span><span class="s1">content</span><span class="s7">.</span><span class="s1">parts</span><span class="s7">[</span><span class="s14">0</span><span class="s7">].</span><span class="s1">text</span><span class="s7">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                    </span></span><span class="s10">try</span><span class="s1"> </span><span class="s7">{</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                        </span></span><span class="s10">const</span><span class="s1"> parsedJson </span><span class="s7">=</span><span class="s1"> </span><span class="s12">JSON</span><span class="s7">.</span><span class="s1">parse</span><span class="s7">(</span><span class="s1">jsonText</span><span class="s7">);</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                        </span></span><span class="s10">if</span><span class="s1"> </span><span class="s7">(</span><span class="s1">parsedJson</span><span class="s7">.</span><span class="s1">firms </span><span class="s7">&amp;&amp;</span><span class="s1"> parsedJson</span><span class="s7">.</span><span class="s1">firms</span><span class="s7">.</span><span class="s1">length </span><span class="s7">&gt;</span><span class="s1"> </span><span class="s14">0</span><span class="s7">)</span><span class="s1"> </span><span class="s7">{</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                            </span>currentFirmsData </span><span class="s7">=</span><span class="s1"> parsedJson</span><span class="s7">.</span><span class="s1">firms</span><span class="s7">.</span><span class="s1">map</span><span class="s7">(</span><span class="s1">firm </span><span class="s7">=&gt;</span><span class="s1"> </span><span class="s7">({</span><span class="s1"> </span><span class="s7">...</span><span class="s1">firm</span><span class="s7">,</span><span class="s1"> feedback</span><span class="s7">:</span><span class="s1"> </span><span class="s10">null</span><span class="s1"> </span><span class="s7">}));</span><span class="s1"><span class="Apple-converted-space"> </span></span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                            </span>displayFirmsAsTable</span><span class="s7">(</span><span class="s1">currentFirmsData</span><span class="s7">,</span><span class="s1"> currentCountry</span><span class="s7">);</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                            </span>exportButton</span><span class="s7">.</span><span class="s1">classList</span><span class="s7">.</span><span class="s1">remove</span><span class="s7">(</span><span class="s8">'hidden'</span><span class="s7">);</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                            </span>refreshFeedbackButton</span><span class="s7">.</span><span class="s1">classList</span><span class="s7">.</span><span class="s1">remove</span><span class="s7">(</span><span class="s8">'hidden'</span><span class="s7">);</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                            </span>refreshFeedbackButton</span><span class="s7">.</span><span class="s1">disabled </span><span class="s7">=</span><span class="s1"> </span><span class="s10">true</span><span class="s7">;</span><span class="s1"><span class="Apple-converted-space"> </span></span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                        </span></span><span class="s7">}</span><span class="s1"> </span><span class="s10">else</span><span class="s1"> </span><span class="s7">{</span></p>
<p class="p7"><span class="s4"><span class="Apple-converted-space">                             </span>displayMessage</span><span class="s7">(</span><span class="s1">`No firms found for </span><span class="s7">${</span><span class="s4">currentCountry</span><span class="s7">}</span><span class="s1"> with the current criteria (especially focusing on payroll services).`</span><span class="s7">,</span><span class="s4"> </span><span class="s1">'info'</span><span class="s7">);</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                        </span></span><span class="s7">}</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                    </span></span><span class="s7">}</span><span class="s1"> </span><span class="s10">catch</span><span class="s1"> </span><span class="s7">(</span><span class="s1">e</span><span class="s7">)</span><span class="s1"> </span><span class="s7">{</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                        </span>console</span><span class="s7">.</span><span class="s1">error</span><span class="s7">(</span><span class="s8">"Error parsing JSON:"</span><span class="s7">,</span><span class="s1"> e</span><span class="s7">,</span><span class="s1"> </span><span class="s8">"\nReceived text:"</span><span class="s7">,</span><span class="s1"> jsonText</span><span class="s7">);</span></p>
<p class="p7"><span class="s4"><span class="Apple-converted-space">                        </span>displayMessage</span><span class="s7">(</span><span class="s1">'Error processing AI data. The format might be unexpected.'</span><span class="s7">,</span><span class="s4"> </span><span class="s1">'error'</span><span class="s7">);</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                    </span></span><span class="s7">}</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                </span></span><span class="s7">}</span><span class="s1"> </span><span class="s10">else</span><span class="s1"> </span><span class="s7">{</span></p>
<p class="p7"><span class="s4"><span class="Apple-converted-space">                     </span>displayMessage</span><span class="s7">(</span><span class="s1">`Could not retrieve firm info for </span><span class="s7">${</span><span class="s4">currentCountry</span><span class="s7">}</span><span class="s1">. AI response might be empty or malformed.`</span><span class="s7">,</span><span class="s4"> </span><span class="s1">'error'</span><span class="s7">);</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                </span></span><span class="s7">}</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s7">}</span><span class="s1"> </span><span class="s10">catch</span><span class="s1"> </span><span class="s7">(</span><span class="s1">error</span><span class="s7">)</span><span class="s1"> </span><span class="s7">{</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                </span>console</span><span class="s7">.</span><span class="s1">error</span><span class="s7">(</span><span class="s8">'Error fetching firms:'</span><span class="s7">,</span><span class="s1"> error</span><span class="s7">);</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                </span>displayMessage</span><span class="s7">(</span><span class="s8">`An error occurred: </span><span class="s7">${</span><span class="s1">error</span><span class="s7">.</span><span class="s1">message</span><span class="s7">}</span><span class="s8">`</span><span class="s7">,</span><span class="s1"> </span><span class="s8">'error'</span><span class="s7">);</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s7">}</span><span class="s1"> </span><span class="s10">finally</span><span class="s1"> </span><span class="s7">{</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                </span>showLoading</span><span class="s7">(</span><span class="s10">false</span><span class="s7">);</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s7">}</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s7">}</span></p>
<p class="p6"><span class="s11"></span><br></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s10">function</span><span class="s1"> displayFirmsAsTable</span><span class="s7">(</span><span class="s1">firms</span><span class="s7">,</span><span class="s1"> country</span><span class="s7">)</span><span class="s1"> </span><span class="s7">{</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span>resultsSection</span><span class="s7">.</span><span class="s1">innerHTML </span><span class="s7">=</span><span class="s1"> </span><span class="s8">''</span><span class="s7">;</span><span class="s1"><span class="Apple-converted-space"> </span></span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s10">if</span><span class="s1"> </span><span class="s7">(!</span><span class="s1">firms </span><span class="s7">||</span><span class="s1"> firms</span><span class="s7">.</span><span class="s1">length </span><span class="s7">===</span><span class="s1"> </span><span class="s14">0</span><span class="s7">)</span><span class="s1"> </span><span class="s7">{</span></p>
<p class="p7"><span class="s4"><span class="Apple-converted-space">                </span>displayMessage</span><span class="s7">(</span><span class="s1">`No firms identified for </span><span class="s7">${</span><span class="s4">country</span><span class="s7">}</span><span class="s1"> (with payroll focus).`</span><span class="s7">,</span><span class="s4"> </span><span class="s1">'info'</span><span class="s7">);</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                </span>exportButton</span><span class="s7">.</span><span class="s1">classList</span><span class="s7">.</span><span class="s1">add</span><span class="s7">(</span><span class="s8">'hidden'</span><span class="s7">);</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                </span>refreshFeedbackButton</span><span class="s7">.</span><span class="s1">classList</span><span class="s7">.</span><span class="s1">add</span><span class="s7">(</span><span class="s8">'hidden'</span><span class="s7">);</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                </span></span><span class="s10">return</span><span class="s7">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s7">}</span></p>
<p class="p7"><span class="s4"><span class="Apple-converted-space">            </span>displayMessage</span><span class="s7">(</span><span class="s1">`Showing </span><span class="s7">${</span><span class="s4">firms</span><span class="s7">.</span><span class="s4">length</span><span class="s7">}</span><span class="s1"> firms for </span><span class="s7">${</span><span class="s4">country</span><span class="s7">}</span><span class="s1"> (payroll focus). Provide feedback to refine. (Verify URLs)`</span><span class="s7">,</span><span class="s4"> </span><span class="s1">'success'</span><span class="s7">);</span></p>
<p class="p6"><span class="s11"></span><br></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s10">const</span><span class="s1"> table </span><span class="s7">=</span><span class="s1"> document</span><span class="s7">.</span><span class="s1">createElement</span><span class="s7">(</span><span class="s8">'table'</span><span class="s7">);</span></p>
<p class="p7"><span class="s4"><span class="Apple-converted-space">            </span>table</span><span class="s7">.</span><span class="s4">className </span><span class="s7">=</span><span class="s4"> </span><span class="s1">'min-w-full divide-y divide-slate-600 bg-slate-700 rounded-lg'</span><span class="s7">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s10">const</span><span class="s1"> thead </span><span class="s7">=</span><span class="s1"> document</span><span class="s7">.</span><span class="s1">createElement</span><span class="s7">(</span><span class="s8">'thead'</span><span class="s7">);</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span>thead</span><span class="s7">.</span><span class="s1">className </span><span class="s7">=</span><span class="s1"> </span><span class="s8">'bg-slate-750'</span><span class="s7">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s10">const</span><span class="s1"> headerRow </span><span class="s7">=</span><span class="s1"> document</span><span class="s7">.</span><span class="s1">createElement</span><span class="s7">(</span><span class="s8">'tr'</span><span class="s7">);</span></p>
<p class="p7"><span class="s4"><span class="Apple-converted-space">            </span></span><span class="s10">const</span><span class="s4"> headers </span><span class="s7">=</span><span class="s4"> </span><span class="s7">[</span><span class="s1">'Firm Name'</span><span class="s7">,</span><span class="s4"> </span><span class="s1">'Description'</span><span class="s7">,</span><span class="s4"> </span><span class="s1">'Website'</span><span class="s7">,</span><span class="s4"> </span><span class="s1">'Feedback'</span><span class="s7">];</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span>headers</span><span class="s7">.</span><span class="s1">forEach</span><span class="s7">((</span><span class="s1">headerText</span><span class="s7">,</span><span class="s1"> index</span><span class="s7">)</span><span class="s1"> </span><span class="s7">=&gt;</span><span class="s1"> </span><span class="s7">{</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                </span></span><span class="s10">const</span><span class="s1"> th </span><span class="s7">=</span><span class="s1"> document</span><span class="s7">.</span><span class="s1">createElement</span><span class="s7">(</span><span class="s8">'th'</span><span class="s7">);</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                </span>th</span><span class="s7">.</span><span class="s1">scope </span><span class="s7">=</span><span class="s1"> </span><span class="s8">'col'</span><span class="s7">;</span></p>
<p class="p7"><span class="s4"><span class="Apple-converted-space">                </span>th</span><span class="s7">.</span><span class="s4">className </span><span class="s7">=</span><span class="s4"> </span><span class="s1">'px-4 py-3 text-left text-xs font-medium text-sky-300 uppercase tracking-wider'</span><span class="s7">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                </span></span><span class="s10">if</span><span class="s1"> </span><span class="s7">(</span><span class="s1">index </span><span class="s7">===</span><span class="s1"> headers</span><span class="s7">.</span><span class="s1">length </span><span class="s7">-</span><span class="s1"> </span><span class="s14">1</span><span class="s7">)</span><span class="s1"> th</span><span class="s7">.</span><span class="s1">style</span><span class="s7">.</span><span class="s1">width </span><span class="s7">=</span><span class="s1"> </span><span class="s8">'100px'</span><span class="s7">;</span><span class="s1"><span class="Apple-converted-space"> </span></span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                </span>th</span><span class="s7">.</span><span class="s1">textContent </span><span class="s7">=</span><span class="s1"> headerText</span><span class="s7">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                </span>headerRow</span><span class="s7">.</span><span class="s1">appendChild</span><span class="s7">(</span><span class="s1">th</span><span class="s7">);</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s7">});</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span>thead</span><span class="s7">.</span><span class="s1">appendChild</span><span class="s7">(</span><span class="s1">headerRow</span><span class="s7">);</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span>table</span><span class="s7">.</span><span class="s1">appendChild</span><span class="s7">(</span><span class="s1">thead</span><span class="s7">);</span></p>
<p class="p6"><span class="s11"></span><br></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s10">const</span><span class="s1"> tbody </span><span class="s7">=</span><span class="s1"> document</span><span class="s7">.</span><span class="s1">createElement</span><span class="s7">(</span><span class="s8">'tbody'</span><span class="s7">);</span></p>
<p class="p7"><span class="s4"><span class="Apple-converted-space">            </span>tbody</span><span class="s7">.</span><span class="s4">className </span><span class="s7">=</span><span class="s4"> </span><span class="s1">'bg-slate-700 divide-y divide-slate-600'</span><span class="s7">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span>firms</span><span class="s7">.</span><span class="s1">forEach</span><span class="s7">((</span><span class="s1">firm</span><span class="s7">,</span><span class="s1"> index</span><span class="s7">)</span><span class="s1"> </span><span class="s7">=&gt;</span><span class="s1"> </span><span class="s7">{</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                </span></span><span class="s10">const</span><span class="s1"> tr </span><span class="s7">=</span><span class="s1"> document</span><span class="s7">.</span><span class="s1">createElement</span><span class="s7">(</span><span class="s8">'tr'</span><span class="s7">);</span></p>
<p class="p7"><span class="s4"><span class="Apple-converted-space">                </span>tr</span><span class="s7">.</span><span class="s4">className </span><span class="s7">=</span><span class="s4"> </span><span class="s1">"hover:bg-slate-650 transition-colors duration-150"</span><span class="s7">;</span></p>
<p class="p6"><span class="s11"></span><br></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                </span></span><span class="s10">const</span><span class="s1"> tdName </span><span class="s7">=</span><span class="s1"> document</span><span class="s7">.</span><span class="s1">createElement</span><span class="s7">(</span><span class="s8">'td'</span><span class="s7">);</span></p>
<p class="p7"><span class="s4"><span class="Apple-converted-space">                </span>tdName</span><span class="s7">.</span><span class="s4">className </span><span class="s7">=</span><span class="s4"> </span><span class="s1">'px-4 py-3 whitespace-normal text-sm text-gray-200 align-top'</span><span class="s7">;</span><span class="s4"><span class="Apple-converted-space"> </span></span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                </span>tdName</span><span class="s7">.</span><span class="s1">textContent </span><span class="s7">=</span><span class="s1"> firm</span><span class="s7">.</span><span class="s1">firmName</span><span class="s7">?.</span><span class="s1">replace</span><span class="s7">(</span><span class="s15">/&lt;/</span><span class="s10">g</span><span class="s7">,</span><span class="s1"> </span><span class="s8">"&amp;lt;"</span><span class="s7">)</span><span class="s1"> </span><span class="s7">||</span><span class="s1"> </span><span class="s8">"N/A"</span><span class="s7">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                </span>tr</span><span class="s7">.</span><span class="s1">appendChild</span><span class="s7">(</span><span class="s1">tdName</span><span class="s7">);</span></p>
<p class="p6"><span class="s11"></span><br></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                </span></span><span class="s10">const</span><span class="s1"> tdDesc </span><span class="s7">=</span><span class="s1"> document</span><span class="s7">.</span><span class="s1">createElement</span><span class="s7">(</span><span class="s8">'td'</span><span class="s7">);</span></p>
<p class="p7"><span class="s4"><span class="Apple-converted-space">                </span>tdDesc</span><span class="s7">.</span><span class="s4">className </span><span class="s7">=</span><span class="s4"> </span><span class="s1">'px-4 py-3 whitespace-normal text-sm text-slate-300 align-top'</span><span class="s7">;</span><span class="s4"><span class="Apple-converted-space"> </span></span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                </span>tdDesc</span><span class="s7">.</span><span class="s1">textContent </span><span class="s7">=</span><span class="s1"> firm</span><span class="s7">.</span><span class="s1">description</span><span class="s7">?.</span><span class="s1">replace</span><span class="s7">(</span><span class="s15">/&lt;/</span><span class="s10">g</span><span class="s7">,</span><span class="s1"> </span><span class="s8">"&amp;lt;"</span><span class="s7">)</span><span class="s1"> </span><span class="s7">||</span><span class="s1"> </span><span class="s8">"N/A"</span><span class="s7">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                </span>tr</span><span class="s7">.</span><span class="s1">appendChild</span><span class="s7">(</span><span class="s1">tdDesc</span><span class="s7">);</span></p>
<p class="p6"><span class="s11"></span><br></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                </span></span><span class="s10">const</span><span class="s1"> tdWebsite </span><span class="s7">=</span><span class="s1"> document</span><span class="s7">.</span><span class="s1">createElement</span><span class="s7">(</span><span class="s8">'td'</span><span class="s7">);</span></p>
<p class="p7"><span class="s4"><span class="Apple-converted-space">                </span>tdWebsite</span><span class="s7">.</span><span class="s4">className </span><span class="s7">=</span><span class="s4"> </span><span class="s1">'px-4 py-3 whitespace-normal text-sm text-slate-300 align-top'</span><span class="s7">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                </span></span><span class="s10">const</span><span class="s1"> websiteUrl </span><span class="s7">=</span><span class="s1"> firm</span><span class="s7">.</span><span class="s1">websiteUrl</span><span class="s7">?.</span><span class="s1">trim</span><span class="s7">()</span><span class="s1"> </span><span class="s7">||</span><span class="s1"> </span><span class="s8">""</span><span class="s7">;</span></p>
<p class="p7"><span class="s4"><span class="Apple-converted-space">                </span></span><span class="s10">const</span><span class="s4"> notFoundMessages </span><span class="s7">=</span><span class="s4"> </span><span class="s7">[</span><span class="s1">"not available"</span><span class="s7">,</span><span class="s4"> </span><span class="s1">"n/a"</span><span class="s7">,</span><span class="s4"> </span><span class="s1">"official url not found"</span><span class="s7">,</span><span class="s4"> </span><span class="s1">""</span><span class="s7">];</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                </span></span><span class="s10">if</span><span class="s1"> </span><span class="s7">(</span><span class="s1">websiteUrl </span><span class="s7">&amp;&amp;</span><span class="s1"> </span><span class="s7">!</span><span class="s1">notFoundMessages</span><span class="s7">.</span><span class="s1">includes</span><span class="s7">(</span><span class="s1">websiteUrl</span><span class="s7">.</span><span class="s1">toLowerCase</span><span class="s7">()))</span><span class="s1"> </span><span class="s7">{</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                    </span></span><span class="s10">if</span><span class="s1"> </span><span class="s7">(</span><span class="s1">websiteUrl</span><span class="s7">.</span><span class="s1">startsWith</span><span class="s7">(</span><span class="s8">'http://'</span><span class="s7">)</span><span class="s1"> </span><span class="s7">||</span><span class="s1"> websiteUrl</span><span class="s7">.</span><span class="s1">startsWith</span><span class="s7">(</span><span class="s8">'https://'</span><span class="s7">))</span><span class="s1"> </span><span class="s7">{</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                        </span></span><span class="s10">const</span><span class="s1"> link </span><span class="s7">=</span><span class="s1"> document</span><span class="s7">.</span><span class="s1">createElement</span><span class="s7">(</span><span class="s8">'a'</span><span class="s7">);</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                        </span>link</span><span class="s7">.</span><span class="s1">href </span><span class="s7">=</span><span class="s1"> websiteUrl</span><span class="s7">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                        </span>link</span><span class="s7">.</span><span class="s1">target </span><span class="s7">=</span><span class="s1"> </span><span class="s8">'_blank'</span><span class="s7">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                        </span>link</span><span class="s7">.</span><span class="s1">rel </span><span class="s7">=</span><span class="s1"> </span><span class="s8">'noopener noreferrer'</span><span class="s7">;</span></p>
<p class="p7"><span class="s4"><span class="Apple-converted-space">                        </span>link</span><span class="s7">.</span><span class="s4">className </span><span class="s7">=</span><span class="s4"> </span><span class="s1">'text-sky-400 hover:text-sky-300 hover:underline'</span><span class="s7">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                        </span>link</span><span class="s7">.</span><span class="s1">textContent </span><span class="s7">=</span><span class="s1"> websiteUrl</span><span class="s7">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                        </span>tdWebsite</span><span class="s7">.</span><span class="s1">appendChild</span><span class="s7">(</span><span class="s1">link</span><span class="s7">);</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                    </span></span><span class="s7">}</span><span class="s1"> </span><span class="s10">else</span><span class="s1"> </span><span class="s7">{</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                        </span>tdWebsite</span><span class="s7">.</span><span class="s1">textContent </span><span class="s7">=</span><span class="s1"> </span><span class="s8">`</span><span class="s7">${</span><span class="s1">websiteUrl</span><span class="s7">.</span><span class="s1">replace</span><span class="s7">(</span><span class="s15">/&lt;/</span><span class="s10">g</span><span class="s7">,</span><span class="s1"> </span><span class="s8">"&amp;lt;"</span><span class="s7">)}</span><span class="s8"> (URL invalid/incomplete)`</span><span class="s7">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                    </span></span><span class="s7">}</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                </span></span><span class="s7">}</span><span class="s1"> </span><span class="s10">else</span><span class="s1"> </span><span class="s7">{</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                    </span>tdWebsite</span><span class="s7">.</span><span class="s1">textContent </span><span class="s7">=</span><span class="s1"> </span><span class="s8">'Official URL not found/provided'</span><span class="s7">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                </span></span><span class="s7">}</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                </span>tr</span><span class="s7">.</span><span class="s1">appendChild</span><span class="s7">(</span><span class="s1">tdWebsite</span><span class="s7">);</span></p>
<p class="p6"><span class="s11"></span><br></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                </span></span><span class="s10">const</span><span class="s1"> tdFeedback </span><span class="s7">=</span><span class="s1"> document</span><span class="s7">.</span><span class="s1">createElement</span><span class="s7">(</span><span class="s8">'td'</span><span class="s7">);</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                </span>tdFeedback</span><span class="s7">.</span><span class="s1">className </span><span class="s7">=</span><span class="s1"> </span><span class="s8">'px-4 py-3 text-center align-middle'</span><span class="s7">;</span></p>
<p class="p6"><span class="s11"></span><br></p>
<p class="p5"><span class="s4"><span class="Apple-converted-space">                </span></span><span class="s1">// Corrected SVG icons</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                </span></span><span class="s10">const</span><span class="s1"> likeIcon </span><span class="s7">=</span><span class="s1"> createFeedbackIcon</span><span class="s7">(</span><span class="s8">'like'</span><span class="s7">,</span><span class="s1"> index</span><span class="s7">);</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                </span></span><span class="s10">const</span><span class="s1"> dislikeIcon </span><span class="s7">=</span><span class="s1"> createFeedbackIcon</span><span class="s7">(</span><span class="s8">'dislike'</span><span class="s7">,</span><span class="s1"> index</span><span class="s7">);</span></p>
<p class="p6"><span class="s1"><span class="Apple-converted-space">                </span></span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                </span></span><span class="s10">if</span><span class="s1"> </span><span class="s7">(</span><span class="s1">firm</span><span class="s7">.</span><span class="s1">feedback </span><span class="s7">===</span><span class="s1"> </span><span class="s8">'like'</span><span class="s7">)</span><span class="s1"> likeIcon</span><span class="s7">.</span><span class="s1">classList</span><span class="s7">.</span><span class="s1">add</span><span class="s7">(</span><span class="s8">'selected'</span><span class="s7">);</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                </span></span><span class="s10">if</span><span class="s1"> </span><span class="s7">(</span><span class="s1">firm</span><span class="s7">.</span><span class="s1">feedback </span><span class="s7">===</span><span class="s1"> </span><span class="s8">'dislike'</span><span class="s7">)</span><span class="s1"> dislikeIcon</span><span class="s7">.</span><span class="s1">classList</span><span class="s7">.</span><span class="s1">add</span><span class="s7">(</span><span class="s8">'selected'</span><span class="s7">);</span></p>
<p class="p6"><span class="s11"></span><br></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                </span>tdFeedback</span><span class="s7">.</span><span class="s1">appendChild</span><span class="s7">(</span><span class="s1">likeIcon</span><span class="s7">);</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                </span>tdFeedback</span><span class="s7">.</span><span class="s1">appendChild</span><span class="s7">(</span><span class="s1">dislikeIcon</span><span class="s7">);</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                </span>tr</span><span class="s7">.</span><span class="s1">appendChild</span><span class="s7">(</span><span class="s1">tdFeedback</span><span class="s7">);</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                </span>tbody</span><span class="s7">.</span><span class="s1">appendChild</span><span class="s7">(</span><span class="s1">tr</span><span class="s7">);</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s7">});</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span>table</span><span class="s7">.</span><span class="s1">appendChild</span><span class="s7">(</span><span class="s1">tbody</span><span class="s7">);</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span>resultsSection</span><span class="s7">.</span><span class="s1">appendChild</span><span class="s7">(</span><span class="s1">table</span><span class="s7">);</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s7">}</span></p>
<p class="p6"><span class="s11"></span><br></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s10">function</span><span class="s1"> createFeedbackIcon</span><span class="s7">(</span><span class="s1">type</span><span class="s7">,</span><span class="s1"> firmIndex</span><span class="s7">)</span><span class="s1"> </span><span class="s7">{</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s10">const</span><span class="s1"> icon </span><span class="s7">=</span><span class="s1"> document</span><span class="s7">.</span><span class="s1">createElement</span><span class="s7">(</span><span class="s8">'span'</span><span class="s7">);</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span>icon</span><span class="s7">.</span><span class="s1">className </span><span class="s7">=</span><span class="s1"> </span><span class="s8">`feedback-icon </span><span class="s7">${</span><span class="s1">type</span><span class="s7">}</span><span class="s8">`</span><span class="s7">;</span></p>
<p class="p5"><span class="s4"><span class="Apple-converted-space">            </span></span><span class="s1">// CORRECTED ICON SVGs</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span>icon</span><span class="s7">.</span><span class="s1">innerHTML </span><span class="s7">=</span><span class="s1"> type </span><span class="s7">===</span><span class="s1"> </span><span class="s8">'like'</span><span class="s1"> </span><span class="s7">?</span><span class="s1"><span class="Apple-converted-space"> </span></span></p>
<p class="p7"><span class="s4"><span class="Apple-converted-space">                </span></span><span class="s1">'&lt;svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-thumbs-up"&gt;&lt;path d="M7 10v12"/&gt;&lt;path d="M17 10V4a2 2 0 0 0-2-2H9a2 2 0 0 0-2 2v6H4l2.69 2.69a2 2 0 0 0 2.82 0L12 10h5z"/&gt;&lt;/svg&gt;'</span><span class="s4"> </span><span class="s7">:</span><span class="s4"><span class="Apple-converted-space"> </span></span></p>
<p class="p7"><span class="s4"><span class="Apple-converted-space">                </span></span><span class="s1">'&lt;svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-thumbs-down"&gt;&lt;path d="M7 14V2"/&gt;&lt;path d="M17 14v6a2 2 0 0 1-2 2H9a2 2 0 0 1-2-2v-6H4l2.69-2.69a2 2 0 0 1 2.82 0L12 14h5z"/&gt;&lt;/svg&gt;'</span><span class="s7">;</span></p>
<p class="p7"><span class="s4"><span class="Apple-converted-space">            </span>icon</span><span class="s7">.</span><span class="s4">title </span><span class="s7">=</span><span class="s4"> type </span><span class="s7">===</span><span class="s4"> </span><span class="s1">'like'</span><span class="s4"> </span><span class="s7">?</span><span class="s4"> </span><span class="s1">'Like this firm'</span><span class="s4"> </span><span class="s7">:</span><span class="s4"> </span><span class="s1">'Dislike this firm'</span><span class="s7">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span>icon</span><span class="s7">.</span><span class="s1">addEventListener</span><span class="s7">(</span><span class="s8">'click'</span><span class="s7">,</span><span class="s1"> </span><span class="s7">(</span><span class="s1">e</span><span class="s7">)</span><span class="s1"> </span><span class="s7">=&gt;</span><span class="s1"> </span><span class="s7">{</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                </span>e</span><span class="s7">.</span><span class="s1">stopPropagation</span><span class="s7">();</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                </span>handleFeedbackClick</span><span class="s7">(</span><span class="s1">firmIndex</span><span class="s7">,</span><span class="s1"> type</span><span class="s7">,</span><span class="s1"> e</span><span class="s7">.</span><span class="s1">currentTarget</span><span class="s7">);</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s7">});</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s10">return</span><span class="s1"> icon</span><span class="s7">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s7">}</span></p>
<p class="p6"><span class="s11"></span><br></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s10">function</span><span class="s1"> handleFeedbackClick</span><span class="s7">(</span><span class="s1">firmIndex</span><span class="s7">,</span><span class="s1"> feedbackType</span><span class="s7">,</span><span class="s1"> clickedIconEl</span><span class="s7">)</span><span class="s1"> </span><span class="s7">{</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s10">const</span><span class="s1"> firm </span><span class="s7">=</span><span class="s1"> currentFirmsData</span><span class="s7">[</span><span class="s1">firmIndex</span><span class="s7">];</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s10">const</span><span class="s1"> currentlySelected </span><span class="s7">=</span><span class="s1"> firm</span><span class="s7">.</span><span class="s1">feedback </span><span class="s7">===</span><span class="s1"> feedbackType</span><span class="s7">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span>firm</span><span class="s7">.</span><span class="s1">feedback </span><span class="s7">=</span><span class="s1"> currentlySelected </span><span class="s7">?</span><span class="s1"> </span><span class="s10">null</span><span class="s1"> </span><span class="s7">:</span><span class="s1"> feedbackType</span><span class="s7">;</span></p>
<p class="p6"><span class="s11"></span><br></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s10">const</span><span class="s1"> row </span><span class="s7">=</span><span class="s1"> clickedIconEl</span><span class="s7">.</span><span class="s1">closest</span><span class="s7">(</span><span class="s8">'tr'</span><span class="s7">);</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s10">const</span><span class="s1"> likeIcon </span><span class="s7">=</span><span class="s1"> row</span><span class="s7">.</span><span class="s1">querySelector</span><span class="s7">(</span><span class="s8">'.feedback-icon.like'</span><span class="s7">);</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s10">const</span><span class="s1"> dislikeIcon </span><span class="s7">=</span><span class="s1"> row</span><span class="s7">.</span><span class="s1">querySelector</span><span class="s7">(</span><span class="s8">'.feedback-icon.dislike'</span><span class="s7">);</span></p>
<p class="p6"><span class="s11"></span><br></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span>likeIcon</span><span class="s7">.</span><span class="s1">classList</span><span class="s7">.</span><span class="s1">remove</span><span class="s7">(</span><span class="s8">'selected'</span><span class="s7">);</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span>dislikeIcon</span><span class="s7">.</span><span class="s1">classList</span><span class="s7">.</span><span class="s1">remove</span><span class="s7">(</span><span class="s8">'selected'</span><span class="s7">);</span></p>
<p class="p6"><span class="s11"></span><br></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s10">if</span><span class="s1"> </span><span class="s7">(</span><span class="s1">firm</span><span class="s7">.</span><span class="s1">feedback </span><span class="s7">===</span><span class="s1"> </span><span class="s8">'like'</span><span class="s7">)</span><span class="s1"> </span><span class="s7">{</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                </span>likeIcon</span><span class="s7">.</span><span class="s1">classList</span><span class="s7">.</span><span class="s1">add</span><span class="s7">(</span><span class="s8">'selected'</span><span class="s7">);</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s7">}</span><span class="s1"> </span><span class="s10">else</span><span class="s1"> </span><span class="s10">if</span><span class="s1"> </span><span class="s7">(</span><span class="s1">firm</span><span class="s7">.</span><span class="s1">feedback </span><span class="s7">===</span><span class="s1"> </span><span class="s8">'dislike'</span><span class="s7">)</span><span class="s1"> </span><span class="s7">{</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                </span>dislikeIcon</span><span class="s7">.</span><span class="s1">classList</span><span class="s7">.</span><span class="s1">add</span><span class="s7">(</span><span class="s8">'selected'</span><span class="s7">);</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s7">}</span></p>
<p class="p6"><span class="s1"><span class="Apple-converted-space">            </span></span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s10">const</span><span class="s1"> anyFeedbackGiven </span><span class="s7">=</span><span class="s1"> currentFirmsData</span><span class="s7">.</span><span class="s1">some</span><span class="s7">(</span><span class="s1">f </span><span class="s7">=&gt;</span><span class="s1"> f</span><span class="s7">.</span><span class="s1">feedback </span><span class="s7">!==</span><span class="s1"> </span><span class="s10">null</span><span class="s7">);</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span>refreshFeedbackButton</span><span class="s7">.</span><span class="s1">disabled </span><span class="s7">=</span><span class="s1"> </span><span class="s7">!</span><span class="s1">anyFeedbackGiven</span><span class="s7">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s7">}</span></p>
<p class="p6"><span class="s1"><span class="Apple-converted-space">        </span></span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s10">function</span><span class="s1"> exportResultsToCSV</span><span class="s7">()</span><span class="s1"> </span><span class="s7">{</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s10">if</span><span class="s1"> </span><span class="s7">(</span><span class="s1">currentFirmsData</span><span class="s7">.</span><span class="s1">length </span><span class="s7">===</span><span class="s1"> </span><span class="s14">0</span><span class="s7">)</span><span class="s1"> </span><span class="s7">{</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                </span>displayMessage</span><span class="s7">(</span><span class="s8">'No data to export.'</span><span class="s7">,</span><span class="s1"> </span><span class="s8">'info'</span><span class="s7">);</span><span class="s1"> </span><span class="s10">return</span><span class="s7">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s7">}</span></p>
<p class="p7"><span class="s4"><span class="Apple-converted-space">            </span></span><span class="s10">const</span><span class="s4"> csvHeaders </span><span class="s7">=</span><span class="s4"> </span><span class="s7">[</span><span class="s1">'Firm Name'</span><span class="s7">,</span><span class="s4"> </span><span class="s1">'Description'</span><span class="s7">,</span><span class="s4"> </span><span class="s1">'Website URL'</span><span class="s7">,</span><span class="s4"> </span><span class="s1">'Feedback'</span><span class="s7">];</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s10">const</span><span class="s1"> sanitize </span><span class="s7">=</span><span class="s1"> </span><span class="s7">(</span><span class="s1">field</span><span class="s7">)</span><span class="s1"> </span><span class="s7">=&gt;</span><span class="s1"> </span><span class="s7">{</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                </span></span><span class="s10">if</span><span class="s1"> </span><span class="s7">(</span><span class="s1">field </span><span class="s7">==</span><span class="s1"> </span><span class="s10">null</span><span class="s7">)</span><span class="s1"> </span><span class="s10">return</span><span class="s1"> </span><span class="s8">''</span><span class="s7">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                </span></span><span class="s10">let</span><span class="s1"> str </span><span class="s7">=</span><span class="s1"> </span><span class="s12">String</span><span class="s7">(</span><span class="s1">field</span><span class="s7">).</span><span class="s1">replace</span><span class="s7">(</span><span class="s15">/"/</span><span class="s10">g</span><span class="s7">,</span><span class="s1"> </span><span class="s8">'""'</span><span class="s7">);</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                </span></span><span class="s10">return</span><span class="s1"> </span><span class="s7">(</span><span class="s1">str</span><span class="s7">.</span><span class="s1">search</span><span class="s7">(</span><span class="s15">/("|,|\n)/</span><span class="s10">g</span><span class="s7">)</span><span class="s1"> </span><span class="s7">&gt;=</span><span class="s1"> </span><span class="s14">0</span><span class="s7">)</span><span class="s1"> </span><span class="s7">?</span><span class="s1"> </span><span class="s8">`"</span><span class="s7">${</span><span class="s1">str</span><span class="s7">}</span><span class="s8">"`</span><span class="s1"> </span><span class="s7">:</span><span class="s1"> str</span><span class="s7">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s7">};</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s10">const</span><span class="s1"> csvRows </span><span class="s7">=</span><span class="s1"> currentFirmsData</span><span class="s7">.</span><span class="s1">map</span><span class="s7">(</span><span class="s1">f </span><span class="s7">=&gt;</span><span class="s1"> </span><span class="s7">[</span><span class="s1">sanitize</span><span class="s7">(</span><span class="s1">f</span><span class="s7">.</span><span class="s1">firmName</span><span class="s7">),</span><span class="s1"> sanitize</span><span class="s7">(</span><span class="s1">f</span><span class="s7">.</span><span class="s1">description</span><span class="s7">),</span><span class="s1"> sanitize</span><span class="s7">(</span><span class="s1">f</span><span class="s7">.</span><span class="s1">websiteUrl</span><span class="s7">),</span><span class="s1"> sanitize</span><span class="s7">(</span><span class="s1">f</span><span class="s7">.</span><span class="s1">feedback</span><span class="s7">)].</span><span class="s1">join</span><span class="s7">(</span><span class="s8">','</span><span class="s7">));</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s10">const</span><span class="s1"> csvString </span><span class="s7">=</span><span class="s1"> </span><span class="s7">[</span><span class="s1">csvHeaders</span><span class="s7">.</span><span class="s1">join</span><span class="s7">(</span><span class="s8">','</span><span class="s7">),</span><span class="s1"> </span><span class="s7">...</span><span class="s1">csvRows</span><span class="s7">].</span><span class="s1">join</span><span class="s7">(</span><span class="s8">'\n'</span><span class="s7">);</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s10">const</span><span class="s1"> blob </span><span class="s7">=</span><span class="s1"> </span><span class="s10">new</span><span class="s1"> </span><span class="s12">Blob</span><span class="s7">([</span><span class="s1">csvString</span><span class="s7">],</span><span class="s1"> </span><span class="s7">{</span><span class="s1"> type</span><span class="s7">:</span><span class="s1"> </span><span class="s8">'text/csv;charset=utf-8;'</span><span class="s1"> </span><span class="s7">});</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s10">const</span><span class="s1"> link </span><span class="s7">=</span><span class="s1"> document</span><span class="s7">.</span><span class="s1">createElement</span><span class="s7">(</span><span class="s8">'a'</span><span class="s7">);</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s10">if</span><span class="s1"> </span><span class="s7">(</span><span class="s1">link</span><span class="s7">.</span><span class="s1">download </span><span class="s7">!==</span><span class="s1"> </span><span class="s10">undefined</span><span class="s7">)</span><span class="s1"> </span><span class="s7">{</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                </span></span><span class="s10">const</span><span class="s1"> url </span><span class="s7">=</span><span class="s1"> </span><span class="s12">URL</span><span class="s7">.</span><span class="s1">createObjectURL</span><span class="s7">(</span><span class="s1">blob</span><span class="s7">);</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                </span>link</span><span class="s7">.</span><span class="s1">setAttribute</span><span class="s7">(</span><span class="s8">'href'</span><span class="s7">,</span><span class="s1"> url</span><span class="s7">);</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                </span>link</span><span class="s7">.</span><span class="s1">setAttribute</span><span class="s7">(</span><span class="s8">'download'</span><span class="s7">,</span><span class="s1"> </span><span class="s8">`market_survey_firms_</span><span class="s7">${</span><span class="s1">currentCountry</span><span class="s7">.</span><span class="s1">replace</span><span class="s7">(</span><span class="s15">/\s+/</span><span class="s10">g</span><span class="s7">,</span><span class="s1"> </span><span class="s8">'_'</span><span class="s7">)</span><span class="s1"> </span><span class="s7">||</span><span class="s1"> </span><span class="s8">'export'</span><span class="s7">}</span><span class="s8">.csv`</span><span class="s7">);</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                </span>link</span><span class="s7">.</span><span class="s1">style</span><span class="s7">.</span><span class="s1">visibility </span><span class="s7">=</span><span class="s1"> </span><span class="s8">'hidden'</span><span class="s7">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                </span>document</span><span class="s7">.</span><span class="s1">body</span><span class="s7">.</span><span class="s1">appendChild</span><span class="s7">(</span><span class="s1">link</span><span class="s7">);</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                </span>link</span><span class="s7">.</span><span class="s1">click</span><span class="s7">();</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                </span>document</span><span class="s7">.</span><span class="s1">body</span><span class="s7">.</span><span class="s1">removeChild</span><span class="s7">(</span><span class="s1">link</span><span class="s7">);</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                </span></span><span class="s12">URL</span><span class="s7">.</span><span class="s1">revokeObjectURL</span><span class="s7">(</span><span class="s1">url</span><span class="s7">);</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s7">}</span><span class="s1"> </span><span class="s10">else</span><span class="s1"> </span><span class="s7">{</span></p>
<p class="p7"><span class="s4"><span class="Apple-converted-space">                </span>displayMessage</span><span class="s7">(</span><span class="s1">'CSV export not supported.'</span><span class="s7">,</span><span class="s4"> </span><span class="s1">'error'</span><span class="s7">);</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s7">}</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s7">}</span></p>
<p class="p6"><span class="s11"></span><br></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s10">function</span><span class="s1"> showLoading</span><span class="s7">(</span><span class="s1">isLoading</span><span class="s7">)</span><span class="s1"> </span><span class="s7">{</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span>loadingIndicator</span><span class="s7">.</span><span class="s1">classList</span><span class="s7">.</span><span class="s1">toggle</span><span class="s7">(</span><span class="s8">'hidden'</span><span class="s7">,</span><span class="s1"> </span><span class="s7">!</span><span class="s1">isLoading</span><span class="s7">);</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span>searchButton</span><span class="s7">.</span><span class="s1">disabled </span><span class="s7">=</span><span class="s1"> isLoading</span><span class="s7">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span>searchButton</span><span class="s7">.</span><span class="s1">classList</span><span class="s7">.</span><span class="s1">toggle</span><span class="s7">(</span><span class="s8">'opacity-50'</span><span class="s7">,</span><span class="s1"> isLoading</span><span class="s7">);</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span>searchButton</span><span class="s7">.</span><span class="s1">classList</span><span class="s7">.</span><span class="s1">toggle</span><span class="s7">(</span><span class="s8">'cursor-not-allowed'</span><span class="s7">,</span><span class="s1"> isLoading</span><span class="s7">);</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span>refreshFeedbackButton</span><span class="s7">.</span><span class="s1">disabled </span><span class="s7">=</span><span class="s1"> isLoading </span><span class="s7">||</span><span class="s1"> </span><span class="s7">!</span><span class="s1">currentFirmsData</span><span class="s7">.</span><span class="s1">some</span><span class="s7">(</span><span class="s1">f </span><span class="s7">=&gt;</span><span class="s1"> f</span><span class="s7">.</span><span class="s1">feedback </span><span class="s7">!==</span><span class="s1"> </span><span class="s10">null</span><span class="s7">);</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s7">}</span></p>
<p class="p6"><span class="s11"></span><br></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s10">function</span><span class="s1"> displayMessage</span><span class="s7">(</span><span class="s1">text</span><span class="s7">,</span><span class="s1"> type </span><span class="s7">=</span><span class="s1"> </span><span class="s8">'info'</span><span class="s7">)</span><span class="s1"> </span><span class="s7">{</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span>messageArea</span><span class="s7">.</span><span class="s1">textContent </span><span class="s7">=</span><span class="s1"> text</span><span class="s7">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span>messageArea</span><span class="s7">.</span><span class="s1">className </span><span class="s7">=</span><span class="s1"> </span><span class="s8">'text-center my-4 min-h-[24px] '</span><span class="s7">;</span><span class="s1"><span class="Apple-converted-space"> </span></span></p>
<p class="p7"><span class="s4"><span class="Apple-converted-space">            </span></span><span class="s10">const</span><span class="s4"> colors </span><span class="s7">=</span><span class="s4"> </span><span class="s7">{</span><span class="s4"> success</span><span class="s7">:</span><span class="s4"> </span><span class="s1">'text-green-400'</span><span class="s7">,</span><span class="s4"> error</span><span class="s7">:</span><span class="s4"> </span><span class="s1">'text-red-400'</span><span class="s7">,</span><span class="s4"> info</span><span class="s7">:</span><span class="s4"> </span><span class="s1">'text-slate-400'</span><span class="s4"> </span><span class="s7">};</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span>messageArea</span><span class="s7">.</span><span class="s1">classList</span><span class="s7">.</span><span class="s1">add</span><span class="s7">(</span><span class="s1">colors</span><span class="s7">[</span><span class="s1">type</span><span class="s7">]</span><span class="s1"> </span><span class="s7">||</span><span class="s1"> colors</span><span class="s7">.</span><span class="s1">info</span><span class="s7">);</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s7">}</span></p>
<p class="p1"><span class="s4"><span class="Apple-converted-space">    </span></span><span class="s3">&lt;/</span><span class="s1">script</span><span class="s3">&gt;</span></p>
<p class="p1"><span class="s3">&lt;/</span><span class="s1">body</span><span class="s3">&gt;</span></p>
<p class="p1"><span class="s3">&lt;/</span><span class="s1">html</span><span class="s3">&gt;</span></p>
<p class="p6"><span class="s11"></span><br></p>
</body>
</html>
